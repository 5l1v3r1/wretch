!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):t.wretch=r()}(this,function(){"use strict";const t=Object.assign||function(t){for(var r,e=1;e<arguments.length;e++){r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t};var r=function(e,n,o){if(void 0===o&&(o=!1),!e||!n||"object"!=typeof e||"object"!=typeof n)return e;var i=t({},e);for(var u in n)n.hasOwnProperty(u)&&(n[u]instanceof Array&&e[u]instanceof Array?i[u]=o?e[u].concat(n[u]):n[u]:"object"==typeof n[u]&&"object"==typeof e[u]?i[u]=r(e[u],n[u],o):i[u]=n[u]);return i},e={defaults:{},errorType:null,polyfills:{fetch:null,FormData:null,URLSearchParams:null,performance:null,PerformanceObserver:null}},n=function(t){return function(n){return void 0===n&&(n=new Map),function(o){void 0===o&&(o={});var i=(e.polyfills.fetch||fetch)(t,r(e.defaults,o)),u=i.then(function(t){return t.ok?t:t[e.errorType||"text"]().then(function(r){var n=new Error(r);throw n[e.errorType]=r,n.status=t.status,n.response=t,n})}),s=function(t){return t.catch(function(t){if(!n.has(t.status))throw t;n.get(t.status)(t)})},f=function(t){return function(r){return s(t?u.then(function(r){return r&&r[t]()}).then(function(t){return t&&r&&r(t)||t}):u.then(function(t){return t&&r&&r(t)||t}))}},c={res:f(null),json:f("json"),blob:f("blob"),formData:f("formData"),arrayBuffer:f("arrayBuffer"),text:f("text"),perfs:function(t){var r=e.polyfills.performance||("undefined"!=typeof self?self.performance:null),n=e.polyfills.PerformanceObserver||("undefined"!=typeof self?self.PerformanceObserver:null),o=r&&r.now();return t&&r&&i.then(function(e){var i=function(n,i){void 0===i&&(i=null);var u=n.getEntriesByName(e.url);if(u&&u.length>0){var s=u.reverse().find(function(t){return t.startTime+5>=o});if(s)return t(s),i&&i.disconnect(),r.clearMeasures(e.url),!0}return!1};if(!i(r)){var u=new n(function(t){return i(t,u)});u.observe({entryTypes:["resource","measure"]})}}),c},error:function(t,r){return n.set(t,r),c},badRequest:function(t){return c.error(400,t)},unauthorized:function(t){return c.error(401,t)},forbidden:function(t){return c.error(403,t)},notFound:function(t){return c.error(404,t)},timeout:function(t){return c.error(408,t)},internalError:function(t){return c.error(500,t)}};return c}}},o=function(){function o(t,r,e){void 0===r&&(r={}),void 0===e&&(e=new Map),this._url=t,this._options=r,this._catchers=e}return o.factory=function(t,r){return void 0===t&&(t=""),void 0===r&&(r={}),new o(t,r)},o.prototype.selfFactory=function(t){var r=void 0===t?{}:t,e=r.url,n=void 0===e?this._url:e,i=r.options,u=void 0===i?this._options:i,s=r.catchers;return new o(n,u,void 0===s?this._catchers:s)},o.prototype.defaults=function(t,n){return void 0===n&&(n=!1),e.defaults=n?e.defaults=r(e.defaults,t):t,this},o.prototype.errorType=function(t){return e.errorType=t,this},o.prototype.polyfills=function(r){return e.polyfills=t({},e.polyfills,r),this},o.prototype.url=function(t){return this.selfFactory({url:t})},o.prototype.baseUrl=function(t){var e=this;return function(n,o){return void 0===n&&(n=""),void 0===o&&(o={}),e.selfFactory({url:t+n,options:r(e._options,o)})}},o.prototype.options=function(t,e){return void 0===e&&(e=!1),this.selfFactory({options:e?r(this._options,t):t})},o.prototype.query=function(t){return this.selfFactory({url:i(this._url,t)})},o.prototype.headers=function(t){return this.selfFactory({options:r(this._options,{headers:t})})},o.prototype.accept=function(t){return this.headers({Accept:t})},o.prototype.content=function(t){return this.headers({"Content-Type":t})},o.prototype.catcher=function(t,r){var e=new Map(this._catchers);return e.set(t,r),this.selfFactory({catchers:e})},o.prototype.get=function(t){return void 0===t&&(t={}),n(this._url)(this._catchers)(r(t,this._options))},o.prototype.delete=function(e){return void 0===e&&(e={}),n(this._url)(this._catchers)(t({},r(e,this._options),{method:"DELETE"}))},o.prototype.put=function(e){return void 0===e&&(e={}),n(this._url)(this._catchers)(t({},r(e,this._options),{method:"PUT"}))},o.prototype.post=function(e){return void 0===e&&(e={}),n(this._url)(this._catchers)(t({},r(e,this._options),{method:"POST"}))},o.prototype.patch=function(e){return void 0===e&&(e={}),n(this._url)(this._catchers)(t({},r(e,this._options),{method:"PATCH"}))},o.prototype.body=function(r){return this.selfFactory({options:t({},this._options,{body:r})})},o.prototype.json=function(t){return this.content("application/json").body(JSON.stringify(t))},o.prototype.formData=function(t){var r=new(e.polyfills.FormData||FormData);for(var n in t)if(t[n]instanceof Array)for(var o=0,i=t[n];o<i.length;o++){var u=i[o];r.append(n+"[]",u)}else r.append(n,t[n]);return this.body(r)},o}(),i=function(t,r){var n=new(e.polyfills.URLSearchParams||URLSearchParams),o=t.indexOf("?");for(var i in r)if(r[i]instanceof Array)for(var u=0,s=r[i];u<s.length;u++){var f=s[u];n.append(i,f)}else n.append(i,r[i]);return~o?t.substring(0,o)+"?"+n.toString():t+"?"+n.toString()};return o.factory});
//# sourceMappingURL=wretch.js.map
