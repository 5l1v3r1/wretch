!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):t.wretch=r()}(this,function(){"use strict";const t=Object.assign||function(t){for(var r,n=1;n<arguments.length;n++){r=arguments[n];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])}return t};var r=function(n,e,o){if(void 0===o&&(o=!1),!n||!e||"object"!=typeof n||"object"!=typeof e)return n;var i=t({},n);for(var u in e)e.hasOwnProperty(u)&&(e[u]instanceof Array&&n[u]instanceof Array?i[u]=o?n[u].concat(e[u]):e[u]:"object"==typeof e[u]&&"object"==typeof n[u]?i[u]=r(n[u],e[u],o):i[u]=e[u]);return i},n={defaults:{},errorType:null,polyfills:{fetch:null,FormData:null,URLSearchParams:null,PerformanceObserver:null}},e=function(t){return function(e){return void 0===e&&(e=new Map),function(o){void 0===o&&(o={});var i=(n.polyfills.fetch||fetch)(t,r(n.defaults,o)),u=i.then(function(t){return t.ok?t:t[n.errorType||"text"]().then(function(r){var e=new Error(r);throw e[n.errorType]=r,e.status=t.status,e.response=t,e})}),s=function(t){return t.catch(function(t){if(!e.has(t.status))throw t;e.get(t.status)(t)})},f=function(t){return function(r){return s(t?u.then(function(r){return r&&r[t]()}).then(function(t){return t&&r&&r(t)||t}):u.then(function(t){return t&&r&&r(t)||t}))}},c={res:f(null),json:f("json"),blob:f("blob"),formData:f("formData"),arrayBuffer:f("arrayBuffer"),text:f("text"),perfs:function(t){var r=n.polyfills.PerformanceObserver||("undefined"!=typeof self?self.PerformanceObserver:null);if(t&&r){var e=null,o=null,u=new r(function(t){e=t.getEntries(),o&&o(),u.disconnect()});u.observe({entryTypes:["resource","measure"]}),i.then(function(r){r&&(e?t(e.reverse().find(function(t){return t.name===r.url})):o=function(){return t(e.reverse().find(function(t){return t.name===r.url}))})})}return c},error:function(t,r){return e.set(t,r),c},badRequest:function(t){return c.error(400,t)},unauthorized:function(t){return c.error(401,t)},forbidden:function(t){return c.error(403,t)},notFound:function(t){return c.error(404,t)},timeout:function(t){return c.error(408,t)},internalError:function(t){return c.error(500,t)}};return c}}},o=function(){function o(t,r,n){void 0===r&&(r={}),void 0===n&&(n=new Map),this._url=t,this._options=r,this._catchers=n}return o.factory=function(t,r){return void 0===t&&(t=""),void 0===r&&(r={}),new o(t,r)},o.prototype.selfFactory=function(t){var r=void 0===t?{}:t,n=r.url,e=void 0===n?this._url:n,i=r.options,u=void 0===i?this._options:i,s=r.catchers;return new o(e,u,void 0===s?this._catchers:s)},o.prototype.defaults=function(t,e){return void 0===e&&(e=!1),n.defaults=e?n.defaults=r(n.defaults,t):t,this},o.prototype.errorType=function(t){return n.errorType=t,this},o.prototype.polyfills=function(r){return n.polyfills=t({},n.polyfills,r),this},o.prototype.url=function(t){return this.selfFactory({url:t})},o.prototype.baseUrl=function(t){var n=this;return function(e,o){return void 0===e&&(e=""),void 0===o&&(o={}),n.selfFactory({url:t+e,options:r(n._options,o)})}},o.prototype.options=function(t,n){return void 0===n&&(n=!1),this.selfFactory({options:n?r(this._options,t):t})},o.prototype.query=function(t){return this.selfFactory({url:i(this._url,t)})},o.prototype.headers=function(t){return this.selfFactory({options:r(this._options,{headers:t})})},o.prototype.accept=function(t){return this.headers({Accept:t})},o.prototype.content=function(t){return this.headers({"Content-Type":t})},o.prototype.catcher=function(t,r){var n=new Map(this._catchers);return n.set(t,r),this.selfFactory({catchers:n})},o.prototype.get=function(t){return void 0===t&&(t={}),e(this._url)(this._catchers)(r(t,this._options))},o.prototype.delete=function(n){return void 0===n&&(n={}),e(this._url)(this._catchers)(t({},r(n,this._options),{method:"DELETE"}))},o.prototype.put=function(n){return void 0===n&&(n={}),e(this._url)(this._catchers)(t({},r(n,this._options),{method:"PUT"}))},o.prototype.post=function(n){return void 0===n&&(n={}),e(this._url)(this._catchers)(t({},r(n,this._options),{method:"POST"}))},o.prototype.patch=function(n){return void 0===n&&(n={}),e(this._url)(this._catchers)(t({},r(n,this._options),{method:"PATCH"}))},o.prototype.body=function(r){return this.selfFactory({options:t({},this._options,{body:r})})},o.prototype.json=function(t){return this.content("application/json").body(JSON.stringify(t))},o.prototype.formData=function(t){var r=new(n.polyfills.FormData||FormData);for(var e in t)if(t[e]instanceof Array)for(var o=0,i=t[e];o<i.length;o++){var u=i[o];r.append(e+"[]",u)}else r.append(e,t[e]);return this.body(r)},o}(),i=function(t,r){var e=new(n.polyfills.URLSearchParams||URLSearchParams),o=t.indexOf("?");for(var i in r)if(r[i]instanceof Array)for(var u=0,s=r[i];u<s.length;u++){var f=s[u];e.append(i,f)}else e.append(i,r[i]);return~o?t.substring(0,o)+"?"+e.toString():t+"?"+e.toString()};return o.factory});
//# sourceMappingURL=wretch.js.map
