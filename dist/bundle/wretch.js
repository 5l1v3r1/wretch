!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):t.wretch=r()}(this,function(){"use strict";const t=Object.assign||function(t){for(var r,o=1;o<arguments.length;o++){r=arguments[o];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t};var r=function(o,n,e){if(void 0===e&&(e=!1),!o||!n||"object"!=typeof o||"object"!=typeof n)return o;var i=t({},o);for(var s in n)n.hasOwnProperty(s)&&(n[s]instanceof Array&&o[s]instanceof Array?i[s]=e?o[s].concat(n[s]):n[s]:"object"==typeof n[s]&&"object"==typeof o[s]?i[s]=r(o[s],n[s],e):i[s]=n[s]);return i},o={defaults:{},errorType:null,polyfills:{fetch:null,FormData:null,URLSearchParams:null}},n=function(t){return function(n){return void 0===n&&(n=new Map),function(e){void 0===e&&(e={});var i=(o.polyfills.fetch||fetch)(t,r(o.defaults,e)).then(function(t){return t.ok?t:t[o.errorType||"text"]().then(function(r){var n=new Error(r);throw n[o.errorType]=r,n.status=t.status,n.response=t,n})}),s=function(t){return t.catch(function(t){if(!n.has(t.status))throw t;n.get(t.status)(t)})},u=function(t){return function(r){return s(t?i.then(function(r){return r&&r[t]()}).then(function(t){return t&&r&&r(t)||t}):i.then(function(t){return t&&r&&r(t)||t}))}},c={res:u(null),json:u("json"),blob:u("blob"),formData:u("formData"),arrayBuffer:u("arrayBuffer"),text:u("text"),perfs:function(t){return t&&"undefined"!=typeof self&&void 0!==self.PerformanceObserver&&i.then(function(r){var o=new self.PerformanceObserver(function(n){r&&t(n.getEntriesByName(r.url).reverse()[0]),o.disconnect()});o.observe({entryTypes:["resource"]})}),c},error:function(t,r){return n.set(t,r),c},badRequest:function(t){return c.error(400,t)},unauthorized:function(t){return c.error(401,t)},forbidden:function(t){return c.error(403,t)},notFound:function(t){return c.error(404,t)},timeout:function(t){return c.error(408,t)},internalError:function(t){return c.error(500,t)}};return c}}},e=function(){function e(t,r,o){void 0===r&&(r={}),void 0===o&&(o=new Map),this._url=t,this._options=r,this._catchers=o}return e.factory=function(t,r){return void 0===t&&(t=""),void 0===r&&(r={}),new e(t,r)},e.prototype.selfFactory=function(t){var r=void 0===t?{}:t,o=r.url,n=void 0===o?this._url:o,i=r.options,s=void 0===i?this._options:i,u=r.catchers;return new e(n,s,void 0===u?this._catchers:u)},e.prototype.defaults=function(t,n){return void 0===n&&(n=!1),o.defaults=n?o.defaults=r(o.defaults,t):t,this},e.prototype.errorType=function(t){return o.errorType=t,this},e.prototype.polyfills=function(r){return o.polyfills=t({},o.polyfills,r),this},e.prototype.url=function(t){return this.selfFactory({url:t})},e.prototype.baseUrl=function(t){var o=this;return function(n,e){return void 0===n&&(n=""),void 0===e&&(e={}),o.selfFactory({url:t+n,options:r(o._options,e)})}},e.prototype.options=function(t,o){return void 0===o&&(o=!1),this.selfFactory({options:o?r(this._options,t):t})},e.prototype.query=function(t){return this.selfFactory({url:i(this._url,t)})},e.prototype.headers=function(t){return this.selfFactory({options:r(this._options,{headers:t})})},e.prototype.accept=function(t){return this.headers({Accept:t})},e.prototype.content=function(t){return this.headers({"Content-Type":t})},e.prototype.catcher=function(t,r){var o=new Map(this._catchers);return o.set(t,r),this.selfFactory({catchers:o})},e.prototype.get=function(t){return void 0===t&&(t={}),n(this._url)(this._catchers)(r(t,this._options))},e.prototype.delete=function(o){return void 0===o&&(o={}),n(this._url)(this._catchers)(t({},r(o,this._options),{method:"DELETE"}))},e.prototype.put=function(o){return void 0===o&&(o={}),n(this._url)(this._catchers)(t({},r(o,this._options),{method:"PUT"}))},e.prototype.post=function(o){return void 0===o&&(o={}),n(this._url)(this._catchers)(t({},r(o,this._options),{method:"POST"}))},e.prototype.patch=function(o){return void 0===o&&(o={}),n(this._url)(this._catchers)(t({},r(o,this._options),{method:"PATCH"}))},e.prototype.body=function(r){return this.selfFactory({options:t({},this._options,{body:r})})},e.prototype.json=function(t){return this.content("application/json").body(JSON.stringify(t))},e.prototype.formData=function(t){var r=new(o.polyfills.FormData||FormData);for(var n in t)if(t[n]instanceof Array)for(var e=0,i=t[n];e<i.length;e++){var s=i[e];r.append(n+"[]",s)}else r.append(n,t[n]);return this.body(r)},e}(),i=function(t,r){var n=new(o.polyfills.URLSearchParams||URLSearchParams),e=t.indexOf("?");for(var i in r)if(r[i]instanceof Array)for(var s=0,u=r[i];s<u.length;s++){var c=u[s];n.append(i,c)}else n.append(i,r[i]);return~e?t.substring(0,e)+"?"+n.toString():t+"?"+n.toString()};return e.factory});
//# sourceMappingURL=wretch.js.map
